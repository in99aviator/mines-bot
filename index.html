<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Mines Premium Bot Ai</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="toolbar">â€¢Mines Bot AIâ€¢</div>

  <!-- Loading Overlay -->
  <div id="loadingOverlay" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:9999; display:flex; align-items:center; justify-content:center;">
    <div style="text-align:center;">
      <div class="loader"></div>
      <p style="color:white; margin-top:15px;">Please wait...</p>
    </div>
  </div>

  <div class="container">
    <div class="status-text" id="status">Bot Status is: Connected Server âœ…</div>
    <h1 class="main-title">Mines Bot 100% Working now Make Money ðŸ’¸ and EnjoyðŸ’€</h1>
    <h2 class="subtitle">Mines Bot VIP</h2>

    <div class="leaderboard-horizontal">
      <div class="scrolling-text" id="scrollingText"></div>
    </div>

    <div class="grid" id="grid"></div>

    <!-- Spinner -->
    <div class="spinner-wrapper">
  <label for="mineCount">Choose Mines (1-20):</label>
  <select id="mineCount" class="custom-spinner" onchange="generateStars()">
    <option value="1">1ðŸ’£</option>
    <option value="2">2ðŸ’£</option>
    <option value="3">3ðŸ’£</option>
    <option value="4">4ðŸ’£</option>
    <option value="5">5ðŸ’£</option>
    <option value="6">6ðŸ’£</option>
    <option value="7">7ðŸ’£</option>
    <option value="8">8ðŸ’£</option>
    <option value="9">9ðŸ’£</option>
    <option value="10">10ðŸ’£</option>
    <option value="11">11ðŸ’£</option>
    <option value="12">12ðŸ’£</option>
    <option value="13">13ðŸ’£</option>
    <option value="14">14ðŸ’£</option>
    <option value="15">15ðŸ’£</option>
    <option value="16">16ðŸ’£</option>
    <option value="17">17ðŸ’£</option>
    <option value="18">18ðŸ’£</option>
    <option value="19">19ðŸ’£</option>
    <option value="20">20ðŸ’£</option>
  </select>
      
</div>

    <div class="buttons">
      <button onclick="generateStars()">Get Signal</button>
      <button onclick="openDialog()" class="open-btn">Check Bot</button>
      <button onclick="updateStatus()">Mines Status</button>
    </div>

    <!-- Dialog Box -->
    <div class="dialog-overlay" id="dialogOverlay">
      <div class="dialog-box">
        <h2>Mines Bot Ai</h2>
        <p>Bot Ai is Succesfully connected âœ…!</p>
        <button onclick="closeDialog()" class="close-btn">Close</button>
      </div>
    </div>

    <!-- Join Panel -->
    <div class="join-box" id="joinBox">
      <h2>Welcome to ModX Crazy 99!</h2>
      <p>This is your mines bet to the premium experience. Stay connected, stay winning! ðŸ’°</p>
    </div>

    <button onclick="redirectToJoin()" class="join-btn">Telegram Channel Join</button>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-auth.js";
    import { getDatabase, ref, get } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-database.js";

    const firebaseConfig = {
    apiKey: "AIzaSyCn553qWsVz2VF1dZ4Ji5OkQDGFvMORbJE",
    authDomain: "pg-data-ed1c2.firebaseapp.com",
    databaseURL: "https://pg-data-ed1c2-default-rtdb.firebaseio.com",
    projectId: "pg-data-ed1c2",
    storageBucket: "pg-data-ed1c2.firebasestorage.app",
    messagingSenderId: "884858492190",
    appId: "1:884858492190:web:67b7606ff790064ef3250f",
    measurementId: "G-J73RD8EH7W"
  };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getDatabase(app);

    const winnerNames = [
  "Ravi", "Anjali", "Pooja", "Amit", "Ramesh", "Kiran", "Neha", "Manoj", "Swati", "Sunil",
  "Priya", "Vikas", "Suman", "Deepak", "Shweta", "Vivek", "Sneha", "Rahul", "Asha", "Alok",
  "Gaurav", "Meena", "Harsh", "Divya", "Nikhil", "Rekha", "Kapil", "Kavita", "Aman", "Simran",
  "Nitin", "Bhavna", "Abhishek", "Naina", "Varun", "Komal", "Saurabh", "Ruchi", "Yogesh", "Namrata",
  "Tanmay", "Pallavi", "Rajesh", "Sapna", "Mohit", "Payal", "Vinod", "Khushi", "Tushar", "Nisha",
  "Ankit", "Kirti", "Hemant", "Isha", "Jatin", "Preeti", "Sachin", "Kajal", "Lokesh", "Tina",
  "Sharad", "Monika", "Dev", "Aarti", "Sandeep", "Neelam", "Rohan", "Ritika", "Anshul", "Lavanya",
  "Mayank", "Jyoti", "Aditya", "Poonam", "Ujjwal", "Megha", "Karan", "Anu", "Parth", "Geeta",
  "Akash", "Tanu", "Rajat", "Lata", "Prateek", "Muskan", "Ashish", "Vidya", "Lakshay", "Ira",
  "Tarun", "Kriti", "Deepanshu", "Juhi", "Naresh", "Surbhi", "Sagar", "Chitra", "Rajiv", "Disha",
  "Ayush", "Shilpa", "Vishal", "Radhika", "Sujit", "Anika", "Hemlata", "Ravina", "Devansh", "Snehal",
  "Arvind", "Neetu", "Darshan", "Karishma", "Bhavesh", "Asmita", "Farhan", "Sana", "Imran", "Zaara",
  "Irfan", "Afreen", "Faizan", "Ayesha", "Sameer", "Saniya", "Rehan", "Zoya", "Wasim", "Nazma",
  "Owais", "Lubna", "Aftab", "Shaista", "Arman", "Alina", "Saif", "Nusrat", "Firoz", "Shabana",
  "Junaid", "Tabassum", "Aslam", "Sobia", "Kabir", "Rubeena", "Tariq", "Yasmin", "Adil", "Heena",
  "Aadil", "Sadia", "Arbaz", "Madiha", "Nabeel", "Rida", "Azhar", "Humaira", "Salman", "Sakina",
  "Shahrukh", "Iqra", "Amjad", "Aqsa", "Reyaz", "Zainab", "Majid", "Mehr", "Zubair", "Sahar",
  "Tanveer", "Anabia", "Sohail", "Amira", "Hasan", "Bushra", "Bilal", "Shiza", "Noman", "Noor",
  "Shadab", "Aleena", "Rauf", "Fatima", "Qasim", "Hafsa", "Yasir", "Laiba", "Talib", "Hina",
  "Wasim", "Mehar", "Mubin", "Ifra", "Abrar", "Misbah", "Zeeshan", "Areeba", "Nasir", "Hoorain"
];
const scrollingText = document.getElementById("scrollingText");

function getRandomAmount() {
  return (Math.floor(Math.random() * 10900) + 100) + ".00";
}

    function generateHorizontalLeaderboard() {
  let winnersText = "";
  for (let i = 0; i < 30; i++) {
    const name = winnerNames[Math.floor(Math.random() * winnerNames.length)];
    const amount = getRandomAmount();
    winnersText += `${name} won â‚¹${amount} &nbsp;&nbsp;&nbsp; `;
  }
  scrollingText.innerHTML = winnersText;
}

    function generateStars() {
  const grid = document.getElementById("grid");
  const mineCountElement = document.getElementById("mineCount");
  const safeCount = mineCountElement ? parseInt(mineCountElement.value) : 1;

  grid.innerHTML = "";

  const totalCells = 25;

  // Generate 25 cell indices: 0 to 24
  const indices = Array.from({ length: totalCells }, (_, i) => i);

  // Shuffle and pick `safeCount` indices to be empty
  const safeIndices = indices
    .sort(() => 0.5 - Math.random())
    .slice(0, safeCount);

  for (let i = 0; i < totalCells; i++) {
    const cell = document.createElement("div");
    cell.classList.add("cell");

    // Add star only if not in safe indices
    if (!safeIndices.includes(i)) {
      cell.classList.add("star");
    }

    grid.appendChild(cell);
  }
}

    function updateStatus() {
      const status = document.getElementById("status");
      if (status) {
        status.innerText = "Bot Status is: Connected to Server âœ…";
      }
    }

    function openDialog() {
      document.getElementById("dialogOverlay").style.display = "flex";
    }

    function closeDialog() {
      document.getElementById("dialogOverlay").style.display = "none";
    }

    function redirectToJoin() {
      window.open("https://t.me/soft99dev", "_blank");
    }

    // Auth Guard
    onAuthStateChanged(auth, (user) => {
      const loadingOverlay = document.getElementById("loadingOverlay");
      if (user) {
        loadingOverlay.style.display = "flex";
        const uid = user.uid;
        const userRef = ref(db, "users/" + uid);
        get(userRef).then(snapshot => {
          if (snapshot.exists()) {
            const status = snapshot.val().status;
            if (status === "active") {
              generateStars();
              updateStatus();
              loadingOverlay.style.display = "none";
            } else if (status === "blocked") {
              loadingOverlay.innerText = "Redirecting to blocked page...";
              setTimeout(() => window.location.href = "blocked.html", 1000);
            } else {
              loadingOverlay.innerText = "Redirecting to payment page...";
              setTimeout(() => window.location.href = "buy.html", 1000);
            }
          } else {
            loadingOverlay.innerText = "Redirecting to login...";
            setTimeout(() => window.location.href = "splash.html", 1000);
          }
        }).catch(() => {
          loadingOverlay.innerText = "Something went wrong. Redirecting...";
          setTimeout(() => window.location.href = "splash.html", 1000);
        });
      } else {
        loadingOverlay.innerText = "Checking session...";
        setTimeout(() => window.location.href = "splash.html", 1000);
      }
    });

    generateHorizontalLeaderboard();
  </script>
</body>
</html>
